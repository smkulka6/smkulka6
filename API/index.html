
<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta name="robots" content="nofollow" />


      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://embedded-systems-design.github.io/template_report/API/">
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../BillofMaterials/">
      
      
      <link rel="icon" href="../static/logo.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.4.0">
            

        

    
      
        <title>Motor Driver Subsystem API Documentation - EGR314 Report Template</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.9f615399.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.649f08f9.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    


   <link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#motor-driver-subsystem-api-documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="EGR314 Report Template" class="md-header__button md-logo" aria-label="EGR314 Report Template" data-md-component="logo">
      
  <img src="../static/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            EGR314 Report Template
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Motor Driver Subsystem API Documentation
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/embedded-systems-design/template_report" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Siddhant Kulkarni Project Repository

      </a>
    </li>
  

      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
    
  
  Motor Driver Subsystem API Documentation

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../BillofMaterials/" class="md-tabs__link">
        
  
    
  
  Bill Of Materials

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../Block%20Diagram/" class="md-tabs__link">
        
  
    
  
  Block Diagram

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../Component_Selection/" class="md-tabs__link">
        
  
    
  
  Major Component Selection &amp; Comparison

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../Individual%20Schematic/" class="md-tabs__link">
        
  
    
  
  Schematic Diagram

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../PIC%20Table/" class="md-tabs__link">
        
  
    
  
  PIC Table

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../Power_Budget/" class="md-tabs__link">
        
  
    
  
  Power Budget Calculation ⚡

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../Resources/" class="md-tabs__link">
        
  
    
  
  Motor Driver Subsystem: Resources

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../subfolder/" class="md-tabs__link">
          
  
    
  
  Subfolder

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="EGR314 Report Template" class="md-nav__button md-logo" aria-label="EGR314 Report Template" data-md-component="logo">
      
  <img src="../static/logo.svg" alt="logo">

    </a>
    EGR314 Report Template
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/embedded-systems-design/template_report" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Siddhant Kulkarni Project Repository
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Motor Driver Subsystem API Documentation
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Motor Driver Subsystem API Documentation
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#message-flow-and-protocol" class="md-nav__link">
    Message Flow and Protocol
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#message-types" class="md-nav__link">
    Message Types
  </a>
  
    <nav class="md-nav" aria-label="Message Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#messages-received" class="md-nav__link">
    Messages Received
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#messages-sent-status-update-to-k-and-t" class="md-nav__link">
    Messages Sent (Status Update to K and T)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#message-summary-table-as-shown-on-hmi-and-mqtt-dashboards" class="md-nav__link">
    Message Summary Table (as shown on HMI and MQTT dashboards)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#message-commands-received-by-motor-driver" class="md-nav__link">
    Message Commands Received by Motor Driver
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#message-format-8-bytes-total" class="md-nav__link">
    Message Format (8 Bytes Total)
  </a>
  
    <nav class="md-nav" aria-label="Message Format (8 Bytes Total)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#format-structure" class="md-nav__link">
    Format Structure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#incoming-message-example" class="md-nav__link">
    Incoming Message Example
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#outgoing-message-example" class="md-nav__link">
    Outgoing Message Example
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handling-logic-uart-spi" class="md-nav__link">
    Handling Logic (UART + SPI)
  </a>
  
    <nav class="md-nav" aria-label="Handling Logic (UART + SPI)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#receiving" class="md-nav__link">
    Receiving:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sending" class="md-nav__link">
    Sending:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#receiver-logic-5w-analysis" class="md-nav__link">
    Receiver Logic (5W Analysis)
  </a>
  
    <nav class="md-nav" aria-label="Receiver Logic (5W Analysis)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what" class="md-nav__link">
    What:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why" class="md-nav__link">
    Why:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when" class="md-nav__link">
    When:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#where" class="md-nav__link">
    Where:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how" class="md-nav__link">
    How:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sender-logic-5w-analysis" class="md-nav__link">
    Sender Logic (5W Analysis)
  </a>
  
    <nav class="md-nav" aria-label="Sender Logic (5W Analysis)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what_1" class="md-nav__link">
    What:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why_1" class="md-nav__link">
    Why:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when_1" class="md-nav__link">
    When:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#where_1" class="md-nav__link">
    Where:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how_1" class="md-nav__link">
    How:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#execution-flow-example" class="md-nav__link">
    Execution Flow Example
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../BillofMaterials/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bill Of Materials
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../Block%20Diagram/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Block Diagram
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../Component_Selection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Major Component Selection &amp; Comparison
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../Individual%20Schematic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Schematic Diagram
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../PIC%20Table/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PIC Table
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../Power_Budget/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Power Budget Calculation ⚡
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../Resources/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Motor Driver Subsystem: Resources
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../subfolder/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Subfolder
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#message-flow-and-protocol" class="md-nav__link">
    Message Flow and Protocol
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#message-types" class="md-nav__link">
    Message Types
  </a>
  
    <nav class="md-nav" aria-label="Message Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#messages-received" class="md-nav__link">
    Messages Received
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#messages-sent-status-update-to-k-and-t" class="md-nav__link">
    Messages Sent (Status Update to K and T)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#message-summary-table-as-shown-on-hmi-and-mqtt-dashboards" class="md-nav__link">
    Message Summary Table (as shown on HMI and MQTT dashboards)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#message-commands-received-by-motor-driver" class="md-nav__link">
    Message Commands Received by Motor Driver
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#message-format-8-bytes-total" class="md-nav__link">
    Message Format (8 Bytes Total)
  </a>
  
    <nav class="md-nav" aria-label="Message Format (8 Bytes Total)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#format-structure" class="md-nav__link">
    Format Structure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#incoming-message-example" class="md-nav__link">
    Incoming Message Example
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#outgoing-message-example" class="md-nav__link">
    Outgoing Message Example
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handling-logic-uart-spi" class="md-nav__link">
    Handling Logic (UART + SPI)
  </a>
  
    <nav class="md-nav" aria-label="Handling Logic (UART + SPI)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#receiving" class="md-nav__link">
    Receiving:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sending" class="md-nav__link">
    Sending:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#receiver-logic-5w-analysis" class="md-nav__link">
    Receiver Logic (5W Analysis)
  </a>
  
    <nav class="md-nav" aria-label="Receiver Logic (5W Analysis)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what" class="md-nav__link">
    What:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why" class="md-nav__link">
    Why:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when" class="md-nav__link">
    When:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#where" class="md-nav__link">
    Where:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how" class="md-nav__link">
    How:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sender-logic-5w-analysis" class="md-nav__link">
    Sender Logic (5W Analysis)
  </a>
  
    <nav class="md-nav" aria-label="Sender Logic (5W Analysis)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what_1" class="md-nav__link">
    What:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why_1" class="md-nav__link">
    Why:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when_1" class="md-nav__link">
    When:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#where_1" class="md-nav__link">
    Where:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how_1" class="md-nav__link">
    How:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#execution-flow-example" class="md-nav__link">
    Execution Flow Example
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/embedded-systems-design/template_report/edit/main/docs/API.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  


<h1 id="motor-driver-subsystem-api-documentation">Motor Driver Subsystem API Documentation</h1>
<h2 id="introduction">Introduction</h2>
<p>This document outlines the Application Programming Interface (API) for the Motor Driver Subsystem in a daisy-chained UART communication system. It describes how the subsystem receives, validates, and responds to UART messages. The motor is controlled using SPI through the IFX9201SGAUMA1 driver IC. The communication is carefully framed and designed to prevent message corruption, allow subsystem coordination, and maintain system integrity. Each design decision is supported by a clear explanation of what, why, when, where, and how it was made.</p>
<hr />
<h2 id="message-flow-and-protocol">Message Flow and Protocol</h2>
<p>The motor driver subsystem is part of a chain of UART-connected devices, each listening to all communication. Messages follow a strict 8-byte protocol format starting and ending with the bytes <code>'F'</code> and <code>'S'</code>, which act as clear delimiters. If the message is valid and addressed to the motor subsystem (<code>'S'</code>), it is executed. Otherwise, the message is ignored or forwarded unmodified. SPI is used to issue motor commands to the IFX9201, ensuring precise motor control. After execution, the subsystem broadcasts its status to the HMI (<code>K</code>) and MQTT server (<code>T</code>) to keep them updated.</p>
<hr />
<h2 id="message-types">Message Types</h2>
<h3 id="messages-received">Messages Received</h3>
<table>
<thead>
<tr>
<th>Byte</th>
<th>Name</th>
<th>Type</th>
<th>Allowed Values</th>
<th>Purpose</th>
<th>Function Called</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Header 1</td>
<td>char</td>
<td><code>'F'</code></td>
<td>Start of frame</td>
<td>—</td>
</tr>
<tr>
<td>2</td>
<td>Header 2</td>
<td>char</td>
<td><code>'S'</code></td>
<td>Start of frame</td>
<td>—</td>
</tr>
<tr>
<td>3</td>
<td>Sender ID</td>
<td>char</td>
<td><code>'T'</code>, etc.</td>
<td>Source subsystem</td>
<td>Used for validation</td>
</tr>
<tr>
<td>4</td>
<td>Receiver ID</td>
<td>char</td>
<td><code>'S'</code></td>
<td>Target = Motor subsystem</td>
<td>Used for matching</td>
</tr>
<tr>
<td>5</td>
<td>Type</td>
<td>char</td>
<td><code>'0'</code></td>
<td>Motor control command</td>
<td>Used for message logic</td>
</tr>
<tr>
<td>6</td>
<td>Data</td>
<td>char</td>
<td><code>'1'</code>, <code>'2'</code>, <code>'3'</code></td>
<td><code>'1'</code> = Off, <code>'2'</code> = FWD, <code>'3'</code> = REV</td>
<td><code>motor_off()</code> / <code>motor_forward()</code> / <code>motor_reverse()</code></td>
</tr>
<tr>
<td>7</td>
<td>Footer 1</td>
<td>char</td>
<td><code>'F'</code></td>
<td>End of frame</td>
<td>—</td>
</tr>
<tr>
<td>8</td>
<td>Footer 2</td>
<td>char</td>
<td><code>'S'</code></td>
<td>End of frame</td>
<td>—</td>
</tr>
</tbody>
</table>
<h3 id="messages-sent-status-update-to-k-and-t">Messages Sent (Status Update to K and T)</h3>
<table>
<thead>
<tr>
<th>Byte</th>
<th>Name</th>
<th>Type</th>
<th>Example Value</th>
<th>Purpose</th>
<th>Function Source</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Header 1</td>
<td>char</td>
<td><code>'F'</code></td>
<td>Start of frame</td>
<td><code>send_status_to()</code></td>
</tr>
<tr>
<td>2</td>
<td>Header 2</td>
<td>char</td>
<td><code>'S'</code></td>
<td>Start of frame</td>
<td><code>send_status_to()</code></td>
</tr>
<tr>
<td>3</td>
<td>Sender ID</td>
<td>char</td>
<td><code>'S'</code></td>
<td>This motor subsystem</td>
<td>hardcoded</td>
</tr>
<tr>
<td>4</td>
<td>Receiver ID</td>
<td>char</td>
<td><code>'K'</code> or <code>'T'</code></td>
<td>Receiver: HMI or MQTT</td>
<td>called twice</td>
</tr>
<tr>
<td>5</td>
<td>Type</td>
<td>char</td>
<td><code>'0'</code></td>
<td>Status update type</td>
<td>always <code>'0'</code></td>
</tr>
<tr>
<td>6</td>
<td>Data</td>
<td>char</td>
<td><code>'1'</code>, <code>'2'</code>, <code>'3'</code></td>
<td><code>'1'</code> = Off, <code>'2'</code> = FWD, <code>'3'</code> = REV</td>
<td>based on last command</td>
</tr>
<tr>
<td>7</td>
<td>Footer 1</td>
<td>char</td>
<td><code>'F'</code></td>
<td>End of frame</td>
<td><code>send_status_to()</code></td>
</tr>
<tr>
<td>8</td>
<td>Footer 2</td>
<td>char</td>
<td><code>'S'</code></td>
<td>End of frame</td>
<td><code>send_status_to()</code></td>
</tr>
</tbody>
</table>
<h3 id="message-summary-table-as-shown-on-hmi-and-mqtt-dashboards">Message Summary Table (as shown on HMI and MQTT dashboards)</h3>
<table>
<thead>
<tr>
<th>Action</th>
<th>Message ID</th>
<th>Recipient</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Motor OFF</td>
<td>FSST01FS</td>
<td>Sanjit</td>
<td>Motor off status update</td>
</tr>
<tr>
<td></td>
<td>FSSK01FS</td>
<td>Kevin</td>
<td>Motor off status update</td>
</tr>
<tr>
<td>Motor Reverse Status</td>
<td>FSST02FS</td>
<td>Sanjit</td>
<td>Motor is reversing</td>
</tr>
<tr>
<td></td>
<td>FSSK02FS</td>
<td>Kevin</td>
<td>Motor is reversing</td>
</tr>
<tr>
<td>Motor Forward Status</td>
<td>FSST03FS</td>
<td>Sanjit</td>
<td>Motor is running forward</td>
</tr>
<tr>
<td></td>
<td>FSSK03FS</td>
<td>Kevin</td>
<td>Motor is running forward</td>
</tr>
</tbody>
</table>
<h3 id="message-commands-received-by-motor-driver">Message Commands Received by Motor Driver</h3>
<table>
<thead>
<tr>
<th>Command Description</th>
<th>Message ID</th>
<th>Sender</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>Motor OFF Command</td>
<td>FSTS01FS</td>
<td>Sanjit</td>
<td>Stop the motor</td>
</tr>
<tr>
<td>Forward Command</td>
<td>FSTS02FS</td>
<td>Sanjit</td>
<td>Run motor forward</td>
</tr>
<tr>
<td>Reverse Command</td>
<td>FSTS03FS</td>
<td>Sanjit</td>
<td>Run motor in reverse</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="message-format-8-bytes-total">Message Format (8 Bytes Total)</h2>
<h3 id="format-structure">Format Structure</h3>
<table>
<thead>
<tr>
<th>Byte</th>
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><code>'F'</code></td>
<td>First start byte, used to mark message beginning</td>
</tr>
<tr>
<td>2</td>
<td><code>'S'</code></td>
<td>Second start byte, used to mark message beginning</td>
</tr>
<tr>
<td>3</td>
<td>Sender ID</td>
<td>Identifier of the system that created the message</td>
</tr>
<tr>
<td>4</td>
<td>Receiver ID</td>
<td>Intended recipient system (e.g., <code>'S'</code>)</td>
</tr>
<tr>
<td>5</td>
<td>Message Type</td>
<td>Type <code>'0'</code> indicates motor control/status message</td>
</tr>
<tr>
<td>6</td>
<td>Data</td>
<td><code>'1'</code> = Motor Off, <code>'2'</code> = Motor Forward, <code>'3'</code> = Motor Reverse</td>
</tr>
<tr>
<td>7</td>
<td><code>'F'</code></td>
<td>First end byte, marks message end</td>
</tr>
<tr>
<td>8</td>
<td><code>'S'</code></td>
<td>Second end byte, marks message end</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="incoming-message-example">Incoming Message Example</h2>
<table>
<thead>
<tr>
<th>Byte</th>
<th>Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><code>'F'</code></td>
<td>Start of frame</td>
</tr>
<tr>
<td>2</td>
<td><code>'S'</code></td>
<td>Start of frame</td>
</tr>
<tr>
<td>3</td>
<td><code>'T'</code></td>
<td>Sender: Team Controller</td>
</tr>
<tr>
<td>4</td>
<td><code>'S'</code></td>
<td>Receiver: This subsystem</td>
</tr>
<tr>
<td>5</td>
<td><code>'0'</code></td>
<td>Type: Motor Control Command</td>
</tr>
<tr>
<td>6</td>
<td><code>'2'</code></td>
<td>Data: Run motor forward</td>
</tr>
<tr>
<td>7</td>
<td><code>'F'</code></td>
<td>End of frame</td>
</tr>
<tr>
<td>8</td>
<td><code>'S'</code></td>
<td>End of frame</td>
</tr>
</tbody>
</table>
<h2 id="outgoing-message-example">Outgoing Message Example</h2>
<table>
<thead>
<tr>
<th>Byte</th>
<th>Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><code>'F'</code></td>
<td>Start of frame</td>
</tr>
<tr>
<td>2</td>
<td><code>'S'</code></td>
<td>Start of frame</td>
</tr>
<tr>
<td>3</td>
<td><code>'S'</code></td>
<td>Sender: This subsystem (motor driver)</td>
</tr>
<tr>
<td>4</td>
<td><code>'T'</code> or <code>'K'</code></td>
<td>Receiver: MQTT or HMI system</td>
</tr>
<tr>
<td>5</td>
<td><code>'0'</code></td>
<td>Type: Status update</td>
</tr>
<tr>
<td>6</td>
<td><code>'2'</code></td>
<td>Data: Motor is running forward</td>
</tr>
<tr>
<td>7</td>
<td><code>'F'</code></td>
<td>End of frame</td>
</tr>
<tr>
<td>8</td>
<td><code>'S'</code></td>
<td>End of frame</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="handling-logic-uart-spi">Handling Logic (UART + SPI)</h2>
<h3 id="receiving">Receiving:</h3>
<ul>
<li>Incoming UART bytes are continuously shifted into a buffer.</li>
<li>If the message has the correct framing (<code>'F'</code>, <code>'S'</code> at both ends), it is validated.</li>
<li>Only messages addressed to <code>'S'</code> are processed; others are ignored or forwarded.</li>
<li>Valid messages result in SPI commands: <code>motor_off</code>, <code>motor_forward</code>, or <code>motor_reverse</code>.</li>
<li>After command execution, two status messages are sent to <code>'K'</code> and <code>'T'</code>.</li>
</ul>
<h3 id="sending">Sending:</h3>
<ul>
<li>Messages are constructed with updated sender/receiver/type/data fields.</li>
<li>Each byte is transmitted one by one using <code>EUSART1_Write()</code>.</li>
<li>The same status message is sent twice (once per subsystem).</li>
</ul>
<hr />
<h2 id="receiver-logic-5w-analysis">Receiver Logic (5W Analysis)</h2>
<h3 id="what">What:</h3>
<p>The subsystem listens for UART messages, filters and validates them, and performs motor control actions if applicable. Messages not for this subsystem are forwarded without modification.</p>
<h3 id="why">Why:</h3>
<p>This approach ensures only relevant commands trigger actions, improving reliability and preventing accidental or duplicated operations due to malformed or misrouted messages.</p>
<h3 id="when">When:</h3>
<p>The validation and control logic is triggered inside the infinite <code>while(1)</code> loop in <code>main.c</code>. The subsystem is always active and responsive to incoming messages.</p>
<h3 id="where">Where:</h3>
<p>All logic is implemented in the <code>main.c</code> file of the firmware project. Message reading is done via the <code>EUSART1_Read()</code> function, and parsing occurs using a rolling 8-byte buffer.</p>
<h3 id="how">How:</h3>
<p>As bytes are received, they're added to a buffer. The code checks the framing pattern and message contents. If valid and for <code>'S'</code>, the corresponding SPI function is called. Otherwise, the message is skipped or forwarded.</p>
<hr />
<h2 id="sender-logic-5w-analysis">Sender Logic (5W Analysis)</h2>
<h3 id="what_1">What:</h3>
<p>After processing a motor control command, the subsystem sends out two UART status messages to keep other systems informed of the action just taken.</p>
<h3 id="why_1">Why:</h3>
<p>Broadcasting the motor state ensures that both HMI and server subsystems remain synchronized and aware of the motor status, which is important for real-time monitoring and control feedback.</p>
<h3 id="when_1">When:</h3>
<p>This logic runs immediately after a valid message is processed and the motor state is changed. It ensures quick and consistent feedback to the team network.</p>
<h3 id="where_1">Where:</h3>
<p>The message creation and transmission occur in <code>main.c</code> using helper functions like <code>send_status_to()</code> and <code>send_uart_message()</code>.</p>
<h3 id="how_1">How:</h3>
<p>For each status message, a formatted 8-byte array is filled with the correct values and then sent byte by byte through the UART using the transmission-ready flag.</p>
<hr />
<h2 id="execution-flow-example">Execution Flow Example</h2>
<ol>
<li>Subsystem receives <code>'FS'</code>, <code>'T'</code>, <code>'S'</code>, <code>'0'</code>, <code>'2'</code>, <code>'FS'</code>, indicating a motor forward command.</li>
<li>The message is validated and parsed, and <code>motor_forward()</code> is executed via SPI.</li>
<li>Two status updates are sent back:</li>
<li><code>'FS'</code>, <code>'S'</code>, <code>'T'</code>, <code>'0'</code>, <code>'2'</code>, <code>'FS'</code></li>
<li><code>'FS'</code>, <code>'S'</code>, <code>'K'</code>, <code>'0'</code>, <code>'2'</code>, <code>'FS'</code></li>
</ol>
<p>These messages confirm that the motor is now running forward.</p>
<hr />





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href=".." class="md-footer__link md-footer__link--prev" aria-label="Previous: Siddhant Kulkarni Project Repository" rel="prev">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Siddhant Kulkarni Project Repository
              </div>
            </div>
          </a>
        
        
          
          <a href="../BillofMaterials/" class="md-footer__link md-footer__link--next" aria-label="Next: Bill Of Materials" rel="next">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Bill Of Materials
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 team-name-here
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="/2023_fall" target="_blank" rel="noopener" title="2023 Site" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M64 464c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16h160v80c0 17.7 14.3 32 32 32h80v288c0 8.8-7.2 16-16 16H64zM64 0C28.7 0 0 28.7 0 64v384c0 35.3 28.7 64 64 64h256c35.3 0 64-28.7 64-64V154.5c0-17-6.7-33.3-18.7-45.3l-90.6-90.5C262.7 6.7 246.5 0 229.5 0H64zm97 289c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0L79 303c-9.4 9.4-9.4 24.6 0 33.9l48 48c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-31-31 31-31zm96-34c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l31 31-31 31c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l48-48c9.4-9.4 9.4-24.6 0-33.9l-48-48z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.tabs.sticky", "toc.follow", "navigation.top", "navigation.path", "navigation.indexes", "navigation.prune", "content.action.edit", "navigation.footer"], "search": "../assets/javascripts/workers/search.a264c092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.4e0fa4ba.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>